#!/usr/bin/expect -f

set timeout -1
set db_password $env(seafile_db_password)
spawn ./{{ seafile_database_script }}
expect -exact ""
send -- "ENTER\r"
expect -exact "\[ server name \] "
send -- "{{ seafile_server_name }}\r"
expect -exact "\[ This server\'s ip or domain \] "
send -- "{{ seafile_server_domain_name }}\r"
expect -exact "\[ default \"8082\" \] "
send -- "\r"
expect -exact "\[ 1 or 2 \] "
send -- "{{ seafile_database_choice }}\r"
expect -exact "\[ default \"localhost\" \] "
send -- "{{ database_host }}\r"
expect -exact "\[ default \"%\" \] "
send -- "\r"
expect -exact "\[ default \"3306\" \] "
send -- "\r"
expect -exact "\[ mysql user for seafile \] "
send -- "{{ seafile_database_username }}\r"
expect -exact "\[ password for seafile \] "
send -- "$db_password\r"
expect -exact "\[ ccnet database \] "
send -- "{{ seafile_ccnet_database_name }}\r"
expect -exact "\[ seafile database \] "
send -- "{{ seafile_database_name }}\r"
expect -exact "\[ seahub database \] "
send -- "{{ seafile_seahub_database_name }}\r"
expect -exact ""
send -- "ENTER\r"
expect eof
